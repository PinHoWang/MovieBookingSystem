(this["webpackJsonpmovie-frontend"]=this["webpackJsonpmovie-frontend"]||[]).push([[0],{199:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(33),s=a.n(l),i=a(12),o=(a(93),a(8)),c=a(9),u=a(11),m=a(10),h=a(20),d=(a(41),a(94),a(74)),v=a(205),f=a(39),g=a(7),p=a(203),b=a(204),E=a(23),y=a.n(E),C=a(38),S=a(13),k=a.n(S);function N(){var e=JSON.parse(localStorage.getItem("user"));return e?(console.log(e.token),e.token):{}}var O="http://localhost:8080/",j=new(function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"getTheaters",value:function(){var e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get(O+"theatres").then((function(e){return e.data})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllMovies",value:function(){return k.a.get(O+"movies").then((function(e){return console.log(e),e.data})).catch((function(e){console.log(e)}))}},{key:"getMovieByTheatreId",value:function(e){return k.a.get(O+"moviesFromTheatre/"+e,{headers:{Authorization:"Bearer "+N(),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){console.log(e)}))}},{key:"getMovieDetails",value:function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get(O+"showDetailsFromMovie/"+t,{headers:{Authorization:"Bearer "+N()}}).then((function(e){return e.data})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovieLayout",value:function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get(O+"getMovieLayout/"+t,{headers:{Authorization:"Bearer "+N()}}).then((function(e){return e.data})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"bookTickets",value:function(e,t){return console.log(e),k.a.post(O+"bookTickets/"+t.filmSessionId,e,{headers:{Authorization:"Bearer "+N(),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return console.log(e.data),e.data}))}}]),e}()),w=a(207),D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={movie:e.movie,theater:e.theater,movieDetails:void 0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.getMovieDetails(this.state.movie.filmId).then((function(t){e.setState({movieDetails:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.movie,a=e.movieDetails,n=e.theater;return console.log(a),r.a.createElement("div",null,r.a.createElement(w.a,{style:{width:"18rem"}},r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,null,t.name)),t.description,r.a.createElement("br",null),r.a.createElement("br",null),t.genre,r.a.createElement("br",null),r.a.createElement("br",null),t.cast,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(i.b,{to:{pathname:"/bookingPage",state:{movie:t,theater:n}}},r.a.createElement(d.a,null,"Book"))))}}]),a}(n.Component),I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={theater:e.location.state.theater,moviesList:void 0,movieDate:void 0},n.handleSelectDate=n.handleSelectDate.bind(Object(g.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.getMovieByTheatreId(this.state.theater.theatreId).then((function(t){e.setState({moviesList:t})}))}},{key:"handleSelectDate",value:function(e){this.setState({movieDate:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.moviesList,a=e.theater;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null,a.name)),r.a.createElement("div",{className:"my-movie"},r.a.createElement(p.a,null,r.a.createElement(b.a,null,t&&t.map((function(e){return r.a.createElement("div",{className:"movieCard",key:e.filmId},r.a.createElement(D,{movie:e,theater:a}))}))))))}}]),a}(n.Component),T=new(function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"login",value:function(e,t){return k.a.post("http://localhost:8080/authenticate",{username:e,password:t}).then((function(e){return console.log(e.data),e.data&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user"),localStorage.removeItem("isCC")}},{key:"register",value:function(e,t){var a=this;return k.a.post("http://localhost:8080/register",{username:e,password:t},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((function(n){return a.login(e,t),console.log(n.data),n.data})).catch((function(e){console.log(e)}))}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}()),M=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={currentUser:void 0,theatreId:e.match.params.theatreId,theaters:void 0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;T.getCurrentUser()&&this.setState({currentUser:T.getCurrentUser()}),j.getTheaters().then((function(t){e.setState({theaters:t})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.theaters&&this.state.theaters.filter((function(t){return t.theatreId===parseInt(e.state.theatreId)})).map((function(t){return r.a.createElement("div",{key:t.theatreId},r.a.createElement("div",null,r.a.createElement("h1",null,t.name),r.a.createElement("br",null),t.city,r.a.createElement("br",null),t.address,r.a.createElement("br",null)),r.a.createElement("div",{className:"booking-button"},e.state.currentUser?r.a.createElement(i.b,{to:{pathname:"/movies",state:{theater:t}}}," ",r.a.createElement(d.a,null,"Get Tickets")):r.a.createElement(i.b,{to:"/login"},r.a.createElement(d.a,null,"Login to Book"))))})))}}]),a}(n.Component),P=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{className:"mainpage-backgournd",src:"images/theater.jpg",alt:"movie theater"}))}}]),a}(n.Component),x=a(34),U=a.n(x),B=a(25),L=a.n(B),A=a(35),H=a.n(A),F=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleLogin=n.handleLogin.bind(Object(g.a)(n)),n.onChangeUsername=n.onChangeUsername.bind(Object(g.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(g.a)(n)),n.state={username:"",password:"",loading:!1,message:""},n}return Object(c.a)(a,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",loading:!0}),this.form.validateAll(),0===this.checkBtn.context._errors.length?T.login(this.state.username,this.state.password).then((function(e){t.setState({message:"Successful Sign in",loading:!1}),t.props.history.push("/"),alert("Succesfully Sign In!"),window.location.reload()}),(function(e){t.setState({message:"Wrong email or password",loading:!1})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this;return console.log(this.state.message),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),r.a.createElement(U.a,{onSubmit:this.handleLogin,ref:function(t){e.form=t}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(L.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[F]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(L.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[F]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.state.loading},this.state.loading&&r.a.createElement("span",{className:"spinner-border spinner-border-sm"}),r.a.createElement("span",null,"Login"))),this.state.message&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.message)),r.a.createElement(H.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}}))))}}]),a}(n.Component),R=a(75),J=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},V=function(e){if(!Object(R.isEmail)(e))return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This is not a valid email.")},_=function(e){if(e.length<6||e.length>40)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The password must be between 6 and 40 characters.")},W=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),console.log("In constructer"),(n=t.call(this,e)).handleRegister=n.handleRegister.bind(Object(g.a)(n)),n.onChangeUsername=n.onChangeUsername.bind(Object(g.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(g.a)(n)),n.state={username:"",password:"",successful:!1,message:""},n}return Object(c.a)(a,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleRegister",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",successful:!1}),this.form.validateAll(),0===this.checkBtn.context._errors.length&&T.register(this.state.username,this.state.password).then((function(e){t.setState({message:"Successful Registered",successful:!0}),t.props.history.push("/"),alert(t.state.message),window.location.reload()}),(function(e){console.log("In error");t.setState({successful:!1,message:"User already exist!"})}))}},{key:"render",value:function(){var e=this;return console.log(this.state.successful),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),r.a.createElement(U.a,{onSubmit:this.handleRegister,ref:function(t){e.form=t}},!this.state.successful&&r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Username"),r.a.createElement(L.a,{type:"text",className:"form-control",name:"email",value:this.state.username,onChange:this.onChangeUsername,validations:[J,V]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(L.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[J,_]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block"},"Sign Up"))),this.state.message&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:this.state.successful?"alert alert-success":"alert alert-danger",role:"alert"},this.state.message,console.log(this.state.message)),this.state.successful?r.a.createElement(i.b,{to:"/"},"Back To Main Page"):r.a.createElement("div",null)),r.a.createElement(H.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}}))))}}]),a}(n.Component),q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={currentUser:T.getCurrentUser(),movie:e.location.state.movie,theater:e.location.state.theater,rawMovieDetail:void 0,movieDetail:void 0,dateDict:void 0,timeDict:void 0,selectDate:"",selectTime:"",selectHall:"",currentMovie:void 0,finalMovie:void 0,seats:[],selectSeats:void 0},n.createMovieSet=n.createMovieSet.bind(Object(g.a)(n)),n.constructDateTimeObject=n.constructDateTimeObject.bind(Object(g.a)(n)),n.handleSelectDate=n.handleSelectDate.bind(Object(g.a)(n)),n.handleSelectTime=n.handleSelectTime.bind(Object(g.a)(n)),n.handleSelectSeat=n.handleSelectSeat.bind(Object(g.a)(n)),n.filterOutMovie=n.filterOutMovie.bind(Object(g.a)(n)),n.handleSelectHall=n.handleSelectHall.bind(Object(g.a)(n)),n}return Object(c.a)(a,[{key:"createMovieSet",value:function(){var e=this;console.log("in createMovieSet"),j.getMovieDetails(this.state.movie.filmId).then((function(t){e.setState({rawMovieDetail:t})})).then((function(){var t=e.state.rawMovieDetail.filter((function(t){return t.theatreId===e.state.theater.theatreId}));e.setState({movieDetail:t})})).then((function(){console.log(e.state.movieDetail),e.constructDateTimeObject()}))}},{key:"constructDateTimeObject",value:function(){for(var e={},t=[],a={},n=[],r=0;r<this.state.movieDetail.length;r++){var l=this.state.movieDetail[r];if(e[l.filmDate])for(var s=0;s<t.length;s++){var i=t[s];if(i.filmDate===l.filmDate){i.data.push(l);break}}else t.push({id:l.filmDate,data:[l]}),e[l.filmDate]=l;if(a[l.filmTiming])for(var o=0;o<n.length;o++){var c=n[o];if(c.filmTiming===l.filmTiming){c.data.push(l);break}}else n.push({id:l.filmTiming,data:[l]}),a[l.filmTiming]=l}this.setState({dateDict:e,timeDict:a})}},{key:"componentDidMount",value:function(){this.createMovieSet()}},{key:"handleSelectDate",value:function(e){this.setState({selectDate:e.target.value}),"none"===e.target.value&&this.setState({selectTime:"",selectHall:"",selectSeats:void 0})}},{key:"handleSelectTime",value:function(e){this.setState({selectTime:e.target.value});var t=e.target.value;""!==this.state.selectDate&&"none"!==this.state.selectDate&&""!==t&&"none"!==t&&this.filterOutMovie(t),"none"===e.target.value&&this.setState({selectHall:"",selectSeats:void 0})}},{key:"filterOutMovie",value:function(e){var t=this,a=this.state.movieDetail.filter((function(a){return a.filmDate===t.state.selectDate&&a.filmTiming===e}));this.setState({currentMovie:a})}},{key:"handleSelectHall",value:function(e){var t=this;this.setState({finalMovie:this.state.currentMovie[e.target.value],selectHall:e.target.value}),j.getMovieLayout(this.state.currentMovie[e.target.value].filmSessionId).then((function(e){t.setState({seats:e})})),"none"===e.target.value&&this.setState({selectSeats:void 0})}},{key:"handleSelectSeat",value:function(e){this.setState({selectSeats:this.state.seats[e.target.value]})}},{key:"render",value:function(){var e=this.state,t=e.dateDict,a=e.timeDict,n=e.selectDate,l=e.selectTime,s=e.selectHall;return console.log(this.state.selectSeats),console.log(this.state.finalMovie),r.a.createElement("div",null,r.a.createElement("p",null,"Select the Date:"),r.a.createElement("select",{name:"selectDate",onChange:this.handleSelectDate},r.a.createElement("option",{key:"none",value:"none"},"Select Date"),t&&Object.keys(t).map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),n&&""!==n&&"none"!==n?r.a.createElement("div",null,r.a.createElement("p",null,"Select the Time:"),r.a.createElement("select",{name:"selectTime",onChange:this.handleSelectTime},r.a.createElement("option",{key:"none",value:"none"},"Select Date"),a&&Object.keys(a).map((function(e){return r.a.createElement("option",{key:e,value:a.time},e)})))):r.a.createElement("div",null),""===n||""===l||"none"===n||"none"===l?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement("p",null,"Select the Hall:"),r.a.createElement("select",{name:"selectHall",onChange:this.handleSelectHall},r.a.createElement("option",{key:"none",value:"none"},"Select Hall"),this.state.currentMovie.map((function(e,t){return r.a.createElement("option",{key:e.hallId,value:t},e.hallName)})))),this.state.finalMovie&&"none"!==n&&"none"!==l&&""!==s&&r.a.createElement("div",null,r.a.createElement("p",null,"Select the Seats:"),r.a.createElement("select",{name:"selectSeat",onChange:this.handleSelectSeat},r.a.createElement("option",{key:"none",value:void 0},"Select Seat"),this.state.seats.map((function(e,t){return r.a.createElement("option",{key:e.seatNumber,value:t},e.seatNumber)}))),r.a.createElement("br",null)),this.state.selectSeats&&r.a.createElement(i.b,{to:{pathname:"/paymentPage",state:{ticket:this.state.selectSeats,movie:this.state.finalMovie}}},r.a.createElement(d.a,null,"Confirm")))}}]),a}(n.Component),Y=new(function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"getProfile",value:function(){return console.log("In getProfile"),k.a.get("http://localhost:8080/profile",{headers:{Authorization:"Bearer "+N()}})}},{key:"saveProfile",value:function(e,t){return console.log("in saveProfil"),k.a.post("http://localhost:8080/profile",{firstName:e,lastName:t},{headers:{Authorization:"Bearer "+N()}}).then((function(e){return console.log(e.data),e.data})).catch((function(e){console.log(e)}))}},{key:"addPayment",value:function(e,t,a,n){return console.log({creditCardNumber:e,expiryMonth:t,expiryYear:a,cvc:n}),k.a.post("http://localhost:8080/addPayment",{creditCardNumber:e,expiryMonth:t,expiryYear:a,cvc:n},{headers:{Authorization:"Bearer "+N()}}).then((function(e){return localStorage.setItem("isCC",!0),e.data}))}},{key:"getHistory",value:function(){return k.a.get("http://localhost:8080/history",{headers:{Authorization:"Bearer "+N()}}).then((function(e){return e.data}))}}]),e}()),G=a(206),$=a(76),K=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={currentUser:void 0,isProfile:!1,firstName:"",lastName:"",history:void 0},n.handleSubmit=n.handleSubmit.bind(Object(g.a)(n)),n.onChangeFirstName=n.onChangeFirstName.bind(Object(g.a)(n)),n.onChangeLastName=n.onChangeLastName.bind(Object(g.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=T.getCurrentUser();console.log(t),t&&this.setState({currentUser:t}),Y.getProfile().then((function(t){e.setState({firstName:t.data.firstName,lastName:t.data.lastName,isProfile:!0})})).catch((function(e){console.log(e.message)})),Y.getHistory().then((function(t){e.setState({history:t})})).catch((function(e){return console.log(e)}))}},{key:"onChangeFirstName",value:function(e){this.setState({firstName:e.target.value})}},{key:"onChangeLastName",value:function(e){this.setState({lastName:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({firstName:this.state.firstName,lastName:this.state.lastName}),Y.saveProfile(this.state.firstName,this.state.lastName).then((function(){t.setState({isProfile:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.isProfile,a=e.history;return console.log(a),r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,"Profile")),t?r.a.createElement("div",null,r.a.createElement("h3",null,"First Name: "),this.state.firstName," ",r.a.createElement("br",null),r.a.createElement("h3",null,"Last Name: "),this.state.lastName,r.a.createElement("br",null),r.a.createElement(i.b,{to:"/creditcard"},r.a.createElement(d.a,null,"Add Credit Card"))):r.a.createElement(G.a,{onSubmit:this.handleSubmit},r.a.createElement(b.a,null,r.a.createElement($.a,null,r.a.createElement(G.a.Control,{type:"text",name:"firstname",value:this.state.firstName,onChange:this.onChangeFirstName,placeholder:"First name"})),r.a.createElement($.a,null,r.a.createElement(G.a.Control,{type:"text",name:"lastname",value:this.state.lastName,onChange:this.onChangeLastName,placeholder:"Last name"}))),r.a.createElement("br",null),r.a.createElement(d.a,{type:"submit"},"Upload Profile")),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h3",null,"User History"),this.state.history&&r.a.createElement("ul",null,this.state.history.map((function(e){return r.a.createElement("li",{key:e.transactionId},e.transactionId," - Movie: ",r.a.createElement("b",null,e.filmName)," - Theatre: ",r.a.createElement("b",null,e.theatreName)," - Price: ",r.a.createElement("b",null,e.totalPrice))})))))}}]),a}(n.Component),Q=a(77),X=a.n(Q),Z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),console.log("in con"),(n=t.call(this,e)).state={cardNumber:"",expiry:"",cvc:"",message:"",successful:!1,isloading:!1},n.handleCardNumberChange=n.handleCardNumberChange.bind(Object(g.a)(n)),n.handleCardExpiryChange=n.handleCardExpiryChange.bind(Object(g.a)(n)),n.handleCardCVCChange=n.handleCardCVCChange.bind(Object(g.a)(n)),n.handleCardSubmit=n.handleCardSubmit.bind(Object(g.a)(n)),n}return Object(c.a)(a,[{key:"handleCardNumberChange",value:function(e){this.setState({cardNumber:e.target.value})}},{key:"handleCardExpiryChange",value:function(e){this.setState({expiry:e.target.value})}},{key:"handleCardCVCChange",value:function(e){this.setState({cvc:e.target.value})}},{key:"handleCardSubmit",value:function(e){var t=this;e.preventDefault();var a=parseInt(this.state.cardNumber.replace(/\s/g,"")),n=parseInt(this.state.expiry.split("/")[0]),r=parseInt(this.state.expiry.split("/")[1])+2e3,l=parseInt(this.state.cvc);Y.addPayment(a,n,r,l).then((function(e){t.setState({successful:!0}),alert("Credit Card Successfully Added!"),t.props.history.push("/"),window.location.reload()})).catch((function(e){alert("Incorrect Credit Card Info!"),window.location.reload()}))}},{key:"render",value:function(){return console.log(this.state.successful),r.a.createElement("div",null,r.a.createElement("h3",null,"Add Credit Card: "),r.a.createElement(G.a,{onSubmit:this.handleCardSubmit},r.a.createElement(X.a,{cardNumberInputProps:{value:this.state.cardNumber,onChange:this.handleCardNumberChange},cardExpiryInputProps:{value:this.state.expiry,onChange:this.handleCardExpiryChange},cardCVCInputProps:{value:this.state.cvc,onChange:this.handleCardCVCChange},fieldClassName:"creditCardInput"}),r.a.createElement("button",null,r.a.createElement("span",null,"Submit"))))}}]),a}(n.Component),ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={ticket:[e.location.state.ticket],movie:e.location.state.movie},n.handlePaying=n.handlePaying.bind(Object(g.a)(n)),n}return Object(c.a)(a,[{key:"handlePaying",value:function(e){var t=this;j.bookTickets(this.state.ticket,this.state.movie).then((function(e){alert("Booking Successful"),t.props.history.push("/"),window.location.reload()})).catch((function(e){alert("Transaction Failed. Need to add Credit Card Info.")}))}},{key:"render",value:function(){var e=this.state,t=e.ticket,a=e.movie;return console.log("Credit Card: "+localStorage.getItem("isCC")),console.log(a),console.log(t),r.a.createElement("div",null,r.a.createElement("h2",null,"Payment Page"),r.a.createElement("p",null,"Movie: ",a.filmName),r.a.createElement("p",null,"Hall: ",a.hallName),r.a.createElement("p",null,"Date: ",a.filmDate),r.a.createElement("p",null,"Time: ",a.filmTiming),r.a.createElement("p",null,"Seat: ",t[0].seatNumber),r.a.createElement("p",null,"Row: ",t[0].rowIndex),r.a.createElement("p",null,"Price: ",t[0].price),null===localStorage.getItem("isCC")?r.a.createElement("div",null,r.a.createElement(d.a,{href:"/profile"},"Add Payment to buy ticket")):r.a.createElement(d.a,{onClick:this.handlePaying},"Confirm"))}}]),a}(n.Component),te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={currentUser:void 0,theaters:void 0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=T.getCurrentUser();console.log("in componentdidmount"),j.getTheaters().then((function(t){e.setState({theaters:t})})),t&&this.setState({currentUser:T.getCurrentUser()})}},{key:"logOut",value:function(){T.logout()}},{key:"render",value:function(){return console.log(this.state.currentUser),r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},r.a.createElement(i.b,{to:"/",className:"navbar-brand"},"Best Movie Theater"),r.a.createElement("div",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/main",className:"nav-link"},r.a.createElement(d.a,null,"Home"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(v.a,{className:"nav-button",title:"Our Theater"},this.state.theaters&&this.state.theaters.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement(f.a.Item,{href:"/theaters/"+e.theatreId},e.name))}))))),this.state.currentUser?r.a.createElement("div",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/profile",className:"nav-link"},r.a.createElement(d.a,null,"Profile"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/login",className:"nav-link",onClick:this.logOut},r.a.createElement(d.a,null,"Log Out")))):r.a.createElement("div",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/login",className:"nav-link"},r.a.createElement(d.a,null,"Login"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/register",className:"nav-link"},r.a.createElement(d.a,null,"Sign Up"))))),r.a.createElement("div",{className:"container-routes"},r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:["/","/main"],render:function(){return r.a.createElement(P,null)}}),r.a.createElement(h.a,{exact:!0,path:"/movies",render:function(e){return r.a.createElement(I,e)}}),r.a.createElement(h.a,{exact:!0,path:"/theaters/:theatreId",render:function(e){return r.a.createElement(M,e)}}),r.a.createElement(h.a,{exact:!0,path:"/register",render:function(e){return r.a.createElement(W,e)}}),r.a.createElement(h.a,{exact:!0,path:"/login",render:function(e){return r.a.createElement(z,e)}}),r.a.createElement(h.a,{exact:!0,path:"/profile",component:K}),r.a.createElement(h.a,{exact:!0,path:"/creditcard",component:Z}),r.a.createElement(h.a,{exact:!0,path:"/bookingPage",component:q}),r.a.createElement(h.a,{exact:!0,path:"/paymentPage",component:ee})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},41:function(e,t,a){},88:function(e,t,a){e.exports=a(199)},93:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.620d5c9e.chunk.js.map